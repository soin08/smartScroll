// VERSION: 1.0 LAST UPDATE: 23.08.2012/*  * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php *  */(function(a){a.fn.smartScroll=function(g){function f(){b.addFixedPosition&&(a(window).scrollTop()>=h?this.css({position:"fixed",top:0}):this.css({position:k,top:l}))}var b=a.extend({},a.fn.smartScroll.defaults,g),d=!0,c=this,e=0,h=this.offset().top-parseFloat(this.css("margin-top").replace("/auto/",0)),k=this.css("position"),l=this.css("top");f.call(c);c.hide();a(document).scrollTop()>b.minScrollDownDist&&c.fadeIn(b.fadeInSpeed);this.click(function(){d?(e=a(document).scrollTop(),0<e&&(d=!d,b.onDirectionChangeDown.call(c),a("html, body").animate({scrollTop:0},b.scrollSpeed).promise().done(function(){b.onScrollingDone.call(c)}))):(d=!d,b.onDirectionChangeUp.call(c),a("html, body").animate({scrollTop:e},b.scrollSpeed).promise().done(function(){b.onScrollingDone.call(c)}))});a(window).scroll(function(){f.call(c);!c.is(":visible")&&a(document).scrollTop()>b.minScrollDownDist?c.fadeIn(b.fadeInSpeed):a(document).scrollTop()>e||a(document).scrollTop()+a(window).height()>=a(document).height()?d||(d=!0,b.onDirectionChangeUp.call(c)):0==a(document).scrollTop()&&d&&c.fadeOut(b.fadeOutSpeed)});return this};a.fn.smartScroll.defaults={minScrollDownDist:150,fadeInSpeed:200,fadeOutSpeed:200,scrollSpeed:500,onDirectionChangeUp:function(){},onDirectionChangeDown:function(){},onScrollingDone:function(){},addFixedPosition:!0}})(jQuery);